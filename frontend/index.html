<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="bundle.js" defer></script>
    <title>B2DOF - Overview</title>
</head>
<body>
    <div id="all-cont">
        <div id="bg">
            <div id="debug" class="hidden"></div>
            <div id="pd-inside">
                <header>
                    <h1>2DoF Spinning Disk</h1>
                    <div id="ld-modes">
                        <div id="ld-modes-selection" mode="light"></div>
                        <div id="ld-modes-btn-cont">
                            <button onclick="changeLDMode(true)" id="light-mode" class="icon-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-360q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35Zm0 80q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Zm326-268Z"/></svg></button>
                            <button onclick="changeLDMode(false)" id="dark-mode" class="icon-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Zm0-80q88 0 158-48.5T740-375q-20 5-40 8t-40 3q-123 0-209.5-86.5T364-660q0-20 3-40t8-40q-78 32-126.5 102T200-480q0 116 82 198t198 82Zm-10-270Z"/></svg></button>    
                        </div>
                    </div>
                </header>
                <div id="information-page" class="page">
                    <div id="info-left" class="info-section">
                        <div id="controlling">
                            <div id="run-btn">
                                <button id="start" class="icon-btn"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"><path d="M336-216v-528l408 264-408 264Zm73-265Zm-1 133 204-132-204-132v264Z"/></svg></button>
                                <button id="stop" class="icon-btn hidden"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"><path d="M336-624v288-288Zm-72 360v-432h432v432H264Zm72-72h288v-288H336v288Z"/></svg></button>
                            </div>
                            <div id="connection">
                                <div class="connection-status">
                                    <button id="connect" class="icon-btn"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"><path d="M479.79-96Q450-96 429-117.15T408-168q0-19.53 9.5-36.26Q427-221 444-230v-106H324q-29.7 0-50.85-21.04Q252-378.08 252-407.63V-490q-17-9-26.5-25.5T216-552q0-29.7 21.21-50.85 21.21-21.15 51-21.15T339-602.85q21 21.15 21 50.85 0 20-9.5 36.5T324-490v82h120v-312h-84l120-144 120 144h-84v312h120v-72h-36v-144h144v144h-36v72q0 29.7-21.15 50.85Q665.7-336 636-336H516v106q17.1 9.11 26.55 25.5 9.45 16.4 9.45 36.44Q552-138 530.79-117q-21.21 21-51 21Z"/></svg></button>
                                    <span id="device-id">Connect</span>    
                                </div>
                                <div class="connection-status hidden">
                                    <button id="disconnect" class="icon-btn"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"><path d="m291-240-51-51 189-189-189-189 51-51 189 189 189-189 51 51-189 189 189 189-51 51-189-189-189 189Z"/></svg></button>
                                    <span id="device-id">163982</span>
                                </div>
                            </div>
                        </div>
                        <div id="disk-code" class="box">
                            <div id="param-header">
                                <h3>Parameters</h3>
                                <button id="disconnect" class="icon-btn" onclick="uploadParams()"><svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px"><path d="M444-336v-342L339-573l-51-51 192-192 192 192-51 51-105-105v342h-72ZM263.72-192Q234-192 213-213.15T192-264v-72h72v72h432v-72h72v72q0 29.7-21.16 50.85Q725.68-192 695.96-192H263.72Z"/></svg></button>
                            </div>
                            <form id="disk-code-form" onsubmit="setDiskCode(event)" err-msg="">
                                <div class="txt-input-with-icon-btn">
                                    <input class="mono" type="text" name="diskcode" id="disk-code-input" placeholder="Enter disk code" required maxlength="4" minlength="4" value="FT39">
                                    <button type="submit" class="icon-btn" id="submit-disk-code"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg></button>
                                </div>
                            </form>
                            <div id="values">
                                <div id="linear-param">
                                    <h4>Linear</h4>
                                    <div class="parameter">
                                        <label for="l-kpid">kpid:</label>
                                        <input type="number" name="l-kpid" id="l-kpid">
                                    </div>
                                    <div class="parameter">
                                        <label for="l-tn">tn:</label>
                                        <input type="number" name="l-tn" id="l-tn">
                                    </div>
                                    <div class="parameter">
                                        <label for="l-tv">tv:</label>
                                        <input type="number" name="l-tv" id="l-tv">
                                    </div>
                                </div>
                                <div id="rotation-param">
                                    <h4>Rotational</h4>
                                    <div class="parameter">
                                        <label for="r-kpid">kpid:</label>
                                        <input type="number" name="r-kpid" id="r-kpid">
                                    </div>
                                    <div class="parameter">
                                        <label for="r-tn">tn:</label>
                                        <input type="number" name="r-tn" id="r-tn">
                                    </div>
                                    <div class="parameter">
                                        <label for="r-tv">tv:</label>
                                        <input type="number" name="r-tv" id="r-tv">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="evaluation" class="box">
                            <h3>Evaluation</h3>
                            <div id="points-cont">
                                <span id="points-num">0</span>
                                <span id="points-txt">%</span>
                            </div>
                            <div id="eval-progbar">
                                <div id="eval-progbar-fill"></div>
                            </div>
                            <div class="login-required-cont">
                                <div class="login-required-reveal disabled">
                                    <form id="upload-run-form" onsubmit="uploadRun(event)">
                                        <input class="mono" type="text" name="session-id-input" id="session-id-input" placeholder="Enter Session-ID" required maxlength="5" minlength="5">
                                        <button id="upload-result" type="submit">Upload Result</button>
                                    </form>
                                    <button id="view-leaderboard" onclick="openLeaderboard()">View Leaderboard</button>
                                </div>
                                <div class="login-required-overlay">
                                    <h4>Login to upload your run</h4>
                                    <button onclick="openLoginForm()">Login</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="info-center" class="info-section">
                        <div id="disk-diagram" class="box">
                            <div class="center-cont">
                                <h3 style="color: var(--clr-yourPath)">Your Path</h3>
                                <h3 style="color: var(--clr-optPath)">Optimal Path</h3>
                            </div>
                            <div id="disk-diagram-cont">
                                <canvas></canvas>
                            </div>
                            <canvas id="lin-pos-to-opt" class="linear-diagram"></canvas>
                            <div id="center-disk-values-cont">
                                <div class="right-cont">
                                    <p>Disk Speed:</p>
                                    <p>Disk Code:</p>
                                </div>
                                <div class="left-cont">
                                    <div class="space-btw">
                                        <span id="disk-speed-value">0</span>
                                        <span>RPM</span>
                                    </div>
                                    <p id="disk-code-value"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="info-right" class="info-section">
                        <div id="sensor-data" class="box">
                            <h3>Sensor Data</h3>
                            <div id="sensor-linear-position">
                                <div class="box-head">
                                    <h4>Linear Position</h4>
                                    <span id="linear-position-value">0</span>
                                </div>
                                <canvas class="linear-diagram"></canvas>
                            </div>
                            <div id="sensor-vertDist">
                                <div class="box-head">
                                    <h4>Vertical Distance</h4>
                                    <span id="vertDist-value">0</span>
                                </div>
                                <canvas class="linear-diagram"></canvas>
                            </div>
                        </div>
                        <div id="manual-mode" class="box">
                            <div class="buttons-cont">
                                <button id="activate-manual-mode" onclick="toggleManualMode()">Activate Manual Mode</button>
                                <button id="fullscreen-manual-mode" class="icon-btn">
                                    <svg id="icon-open-fullscreen" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M120-120v-320h80v184l504-504H520v-80h320v320h-80v-184L256-200h184v80H120Z"/></svg>
                                    <svg class="hidden" id="icon-close-fullscreen" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="m136-80-56-56 264-264H160v-80h320v320h-80v-184L136-80Zm344-400v-320h80v184l264-264 56 56-264 264h184v80H480Z"/></svg>
                                </button>
                            </div>
                            <div class="inputs-cont disabled">
                                <label for="range-linear-motor">Move linear motor</label>
                                <input type="range" value="50" name="range-linear-motor" id="range-linear-motor">
                                <label for="range-disk-speed">Disk speed</label>
                                <input type="range" value="0" name="range-disk-speed" id="range-disk-speed">
                            </div>
                        </div>
                    </div>
                </div>
                <div id="leaderboard-page" class="page hidden">
                    <nav>
                        <button id="back" class="icon-btn" onclick="closeLeaderboard()"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m313-440 224 224-57 56-320-320 320-320 57 56-224 224h487v80H313Z"/></svg></button>
                        <h2>Leaderboard</h2>
                    </nav>
                    <form id="lb-form" onsubmit="getLeaderboard(event)">                    
                        <div class="filter">
                            <h3>Session-ID</h3>
                            <div class="buttons-cont">
                                <input type="text" name="lb-session-id-input" id="lb-session-id-input" placeholder="Enter Session-ID" required minlength="5" maxlength="5">
                                <a class="button icon-btn clear-input"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a>
                            </div>
                        </div>
                        <div class="filter">
                            <h3>Disk-Code</h3>
                            <div class="buttons-cont">
                                <input type="text" name="lb-disk-code-input" id="lb-disk-code-input" placeholder="Enter Disk-Code" minlength="4" maxlength="4">
                                <a class="button icon-btn clear-input"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></a>     
                            </div> 
                        </div>
                        <div id="lb-page-cont">
                            <input type="number" name="lb-page-input" id="lb-page-input" placeholder="Page" min="1" max="1">
                            <br>
                            <div>
                                <span id="lb-page-count">0</span><span> total page(s)</span>
                            </div>
                        </div>
                        <button type="submit" class="filter" id="sync">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M160-160v-80h110l-16-14q-52-46-73-105t-21-119q0-111 66.5-197.5T400-790v84q-72 26-116 88.5T240-478q0 45 17 87.5t53 78.5l10 10v-98h80v240H160Zm400-10v-84q72-26 116-88.5T720-482q0-45-17-87.5T650-648l-10-10v98h-80v-240h240v80H690l16 14q49 49 71.5 106.5T800-482q0 111-66.5 197.5T560-170Z"/></svg>
                        </button>
                    </form>
                    <table id="leaderboard-table">
                        <tr>
                            <th>Rank</th>
                            <th>Username</th>
                            <th>Score</th>
                            <th>Timestamp</th>
                            <th>Disk-Code</th>
                            <th>Session-ID</th>
                        </tr>
                    </table>
                </div>
            </div>
            <footer>
                <div id="company">
                    by <a href="/">Feet</a>
                </div>
                <a href="https://github.com/Finnrich/EPS-2DoF-SpinningDisk" target="_blank" class="icon-btn">
                    <svg width="98" height="96" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z" fill="light-dark(#24292f, #fff)"/></svg>
                </a>
            </footer>
        </div>
        <div class="popup hidden">
            <div class="popup-bg"></div>
            <form class="popup-content" id="login-form" onsubmit="login(event)">
                <input type="text" name="username" id="username" placeholder="Username">
                <input type="password" name="password" id="password" placeholder="Password">
                <button type="submit">Login</button>
            </form>
        </div>
    </div>
</body>
</html>